{% extends "layout.html" %}

{% block title %}Register - EventSync{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="auth-form animate-on-scroll">
        <h2>Create Your EventSync Account</h2>
        
        <div class="auth-tabs mb-4">
          <div class="auth-tab {% if request.args.get('user_type') != 'organizer' %}active{% endif %}" id="attendee-tab">I want to attend events</div>
          <div class="auth-tab {% if request.args.get('user_type') == 'organizer' %}active{% endif %}" id="organizer-tab">I want to organize events</div>
        </div>
        
        <form method="POST" action="{{ url_for('register') }}" novalidate>
          {{ form.hidden_tag() }}
          
          <div class="row g-3">
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.username.label(class="form-label") }}
                {% if form.username.errors %}
                  {{ form.username(class="form-control is-invalid") }}
                  <div class="invalid-feedback">
                    {% for error in form.username.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                {% else %}
                  {{ form.username(class="form-control", placeholder="Choose a username") }}
                {% endif %}
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.email.label(class="form-label") }}
                {% if form.email.errors %}
                  {{ form.email(class="form-control is-invalid") }}
                  <div class="invalid-feedback">
                    {% for error in form.email.errors %}
                      {{ error }}
                    {% endfor %}
                  </div>
                {% else %}
                  {{ form.email(class="form-control", placeholder="Enter your email") }}
                {% endif %}
              </div>
            </div>
          </div>
          
          <div class="mb-3">
            {{ form.full_name.label(class="form-label") }}
            {% if form.full_name.errors %}
              {{ form.full_name(class="form-control is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.full_name.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% else %}
              {{ form.full_name(class="form-control", placeholder="Enter your full name") }}
            {% endif %}
          </div>
          
          <div class="mb-3">
            {{ form.phone.label(class="form-label") }}
            {% if form.phone.errors %}
              {{ form.phone(class="form-control is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.phone.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            {% else %}
              {{ form.phone(class="form-control", placeholder="Enter your phone number (optional)") }}
            {% endif %}
            <div class="form-text">We'll use this to send event notifications.</div>
          </div>
          
          <div class="row g-3">
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.password.label(class="form-label") }}
                <div class="input-group">
                  {% if form.password.errors %}
                    {{ form.password(class="form-control is-invalid") }}
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="password">
                      <i class="fas fa-eye"></i>
                    </button>
                    <div class="invalid-feedback">
                      {% for error in form.password.errors %}
                        {{ error }}
                      {% endfor %}
                    </div>
                  {% else %}
                    {{ form.password(class="form-control", placeholder="Create a password") }}
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="password">
                      <i class="fas fa-eye"></i>
                    </button>
                  {% endif %}
                </div>
                <div class="form-text">At least 8 characters with letters and numbers</div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.confirm_password.label(class="form-label") }}
                <div class="input-group">
                  {% if form.confirm_password.errors %}
                    {{ form.confirm_password(class="form-control is-invalid") }}
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="confirm_password">
                      <i class="fas fa-eye"></i>
                    </button>
                    <div class="invalid-feedback">
                      {% for error in form.confirm_password.errors %}
                        {{ error }}
                      {% endfor %}
                    </div>
                  {% else %}
                    {{ form.confirm_password(class="form-control", placeholder="Confirm your password") }}
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="confirm_password">
                      <i class="fas fa-eye"></i>
                    </button>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          
          <div class="mb-4">
            <label class="form-label fw-bold mb-3">Choose Your Account Type</label>
            {{ form.user_type(class="d-none") }}
            
            <div class="row g-3">
              <!-- Attendee Account Card -->
              <div class="col-md-6">
                <div class="account-type-card {% if request.args.get('user_type') != 'organizer' %}active{% endif %}" data-type="attendee">
                  <div class="account-type-header">
                    <div class="account-type-icon text-primary">
                      <i class="fas fa-user-friends fa-3x"></i>
                    </div>
                    <h4 class="account-type-title">Event Attendee</h4>
                  </div>
                  <div class="account-type-body">
                    <p class="account-type-description">Perfect for individuals who want to discover and attend amazing events.</p>
                    <ul class="account-type-features">
                      <li><i class="fas fa-check me-2 text-success"></i>Browse and search events</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Purchase event tickets</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Digital ticket management</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Event notifications</li>
                    </ul>
                  </div>
                </div>
              </div>
              
              <!-- Organizer Account Card -->
              <div class="col-md-6">
                <div class="account-type-card {% if request.args.get('user_type') == 'organizer' %}active{% endif %}" data-type="organizer">
                  <div class="account-type-header">
                    <div class="account-type-icon text-secondary">
                      <i class="fas fa-calendar-plus fa-3x"></i>
                    </div>
                    <h4 class="account-type-title">Event Organizer</h4>
                  </div>
                  <div class="account-type-body">
                    <p class="account-type-description">Ideal for professionals and organizations hosting events.</p>
                    <ul class="account-type-features">
                      <li><i class="fas fa-check me-2 text-success"></i>Create and manage events</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Sell tickets & track sales</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Attendee management</li>
                      <li><i class="fas fa-check me-2 text-success"></i>Analytics & reporting</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="terms" required>
            <label class="form-check-label" for="terms">
              I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and <a href="#" class="text-decoration-none">Privacy Policy</a>
            </label>
          </div>
          
          <div class="d-grid">
            {{ form.submit(class="btn btn-primary btn-lg", id="register-button") }}
          </div>
        </form>
        
        <hr class="my-4">
        
        <div class="text-center">
          <p>Already have an account? <a href="{{ url_for('login') }}" class="text-decoration-none">Login</a></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Info Section -->
<section class="py-5 register-benefits-section">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="section-title">Why Register for EVENTSYNC?</h2>
      <p class="section-subtitle">Join thousands of event enthusiasts and organizers worldwide</p>
    </div>
    
    <div class="row g-4">
      <!-- Attendee Benefits -->
      <div class="col-lg-6">
        <div class="benefits-group">
          <h3 class="benefits-group-title">
            <i class="fas fa-user-friends me-2 text-primary"></i>
            For Event Attendees
          </h3>
          
          <div class="row g-3">
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-search"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Discover Events</h5>
                  <p class="benefit-description">Find events that match your interests and connect with like-minded individuals in your area.</p>
                </div>
              </div>
            </div>
            
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-mouse-pointer"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Easy Registration</h5>
                  <p class="benefit-description">Register for events with just a few clicks. No more waiting in lines or complicated processes!</p>
                </div>
              </div>
            </div>
            
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Digital Tickets</h5>
                  <p class="benefit-description">Access your tickets anytime, anywhere. No need to print physical tickets or worry about losing them.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Organizer Benefits -->
      <div class="col-lg-6">
        <div class="benefits-group">
          <h3 class="benefits-group-title">
            <i class="fas fa-calendar-plus me-2 text-secondary"></i>
            For Event Organizers
          </h3>
          
          <div class="row g-3">
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-plus-circle"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Create Events</h5>
                  <p class="benefit-description">Easily create and manage events of any size or type with our intuitive and powerful tools.</p>
                </div>
              </div>
            </div>
            
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Track Performance</h5>
                  <p class="benefit-description">Get detailed analytics and insights about your events, attendees, and engagement metrics.</p>
                </div>
              </div>
            </div>
            
            <div class="col-12">
              <div class="benefit-card">
                <div class="benefit-icon">
                  <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="benefit-content">
                  <h5 class="benefit-title">Monetize Events</h5>
                  <p class="benefit-description">Set up ticket sales with various pricing options and manage all registrations seamlessly.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Trust Indicators -->
    <div class="row mt-5 pt-4">
      <div class="col-12">
        <div class="trust-section text-center">
          <div class="row g-4">
            <div class="col-6 col-md-3">
              <div class="trust-item">
                <h4 class="trust-number">10K+</h4>
                <p class="trust-label">Active Users</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="trust-item">
                <h4 class="trust-number">500+</h4>
                <p class="trust-label">Events Created</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="trust-item">
                <h4 class="trust-number">50K+</h4>
                <p class="trust-label">Tickets Sold</p>
              </div>
            </div>
            <div class="col-6 col-md-3">
              <div class="trust-item">
                <h4 class="trust-number">4.9★</h4>
                <p class="trust-label">User Rating</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Toggle between attendee and organizer tabs
    const attendeeTab = document.getElementById('attendee-tab');
    const organizerTab = document.getElementById('organizer-tab');
    const userTypeInput = document.getElementById('user_type');
    const accountTypeCards = document.querySelectorAll('.account-type-card');
    
    // Handle tab clicking (existing functionality)
    if (attendeeTab && organizerTab && userTypeInput) {
      attendeeTab.addEventListener('click', function() {
        organizerTab.classList.remove('active');
        attendeeTab.classList.add('active');
        userTypeInput.value = 'attendee';
        updateAccountTypeCards('attendee');
      });
      
      organizerTab.addEventListener('click', function() {
        attendeeTab.classList.remove('active');
        organizerTab.classList.add('active');
        userTypeInput.value = 'organizer';
        updateAccountTypeCards('organizer');
      });
      
      // Set initial value based on active tab
      if (attendeeTab.classList.contains('active')) {
        userTypeInput.value = 'attendee';
      } else {
        userTypeInput.value = 'organizer';
      }
    }
    
    // Handle account type card clicking
    accountTypeCards.forEach(card => {
      card.addEventListener('click', function() {
        const accountType = this.getAttribute('data-type');
        
        // Remove active class from all cards
        accountTypeCards.forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked card
        this.classList.add('active');
        
        // Update hidden input value
        if (userTypeInput) {
          userTypeInput.value = accountType;
        }
        
        // Update tab states
        if (accountType === 'attendee') {
          if (attendeeTab) attendeeTab.classList.add('active');
          if (organizerTab) organizerTab.classList.remove('active');
        } else {
          if (organizerTab) organizerTab.classList.add('active');
          if (attendeeTab) attendeeTab.classList.remove('active');
        }
      });
    });
    
    // Function to update card states based on type
    function updateAccountTypeCards(type) {
      accountTypeCards.forEach(card => {
        const cardType = card.getAttribute('data-type');
        if (cardType === type) {
          card.classList.add('active');
        } else {
          card.classList.remove('active');
        }
      });
    }
    
    // Password visibility toggle
    const toggleButtons = document.querySelectorAll('.toggle-password');
    toggleButtons.forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const target = document.getElementById(targetId);
        
        if (target.type === 'password') {
          target.type = 'text';
          this.innerHTML = '<i class="fas fa-eye-slash"></i>';
        } else {
          target.type = 'password';
          this.innerHTML = '<i class="fas fa-eye"></i>';
        }
      });
    });
    
    // Form validation for terms checkbox
    const registerButton = document.getElementById('register-button');
    const termsCheckbox = document.getElementById('terms');
    
    if (registerButton && termsCheckbox) {
      registerButton.addEventListener('click', function(e) {
        if (!termsCheckbox.checked) {
          e.preventDefault();
          alert('You must agree to the Terms of Service and Privacy Policy to register.');
        }
      });
    }
  });
</script>
{% endblock %}

